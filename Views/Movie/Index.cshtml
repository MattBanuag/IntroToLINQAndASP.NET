@model IEnumerable<Movie>;

@if(Model.Count() <= 0)
{
    <h2>No movies to show.</h2>
} else
{
    <h2>@ViewBag.PageTitle</h2>
    
        @foreach (Movie movie in Model)
        {
            <ul class="list-group">
                <h5 class="list-group-item text-primary"><b>@movie.Title</b></h5>
                <li class="list-group-item"><b>Genre:</b> @movie.Genre</li>
                <li class="list-group-item">
                    <b>Rating:</b>
                    @{
                        HashSet<Rating> ratings = movie.GetRatings();

                        if (ratings.Any())
                        {
                            <i>
                                @decimal.Round(ratings.Average(r => (decimal)r.Score),2) / 10
                            </i>
                        }
                        else
                        {
                            <i>No Ratings</i>
                        }
                    }
                </li>
                <li class="list-group-item">
                    <b>Starring:</b> 
                    @foreach (Role role in movie.GetRoles())
                    {
                        <i>@role.Actor.Name as "@role.Part"</i>
                    }
                </li>
                <li class="list-group-item"><b>Production Date:</b> @movie.ProductionDate</li>
                <li class="list-group-item"><b>Budget(EST):</b> $@movie.Budget</li>
            </ul>
            <br/>
        }

        <h6 class="text-success">Result: @Model.Count() movie/s</h6>
}
